<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public · ClimaOcean.jl</title><meta name="title" content="Public · ClimaOcean.jl"/><meta property="og:title" content="Public · ClimaOcean.jl"/><meta property="twitter:title" content="Public · ClimaOcean.jl"/><meta name="description" content="Documentation for ClimaOcean.jl."/><meta property="og:description" content="Documentation for ClimaOcean.jl."/><meta property="twitter:description" content="Documentation for ClimaOcean.jl."/><meta property="og:url" content="https://clima.github.io/ClimaOceanDocumentation/dev/library/public/"/><meta property="twitter:url" content="https://clima.github.io/ClimaOceanDocumentation/dev/library/public/"/><link rel="canonical" href="https://clima.github.io/ClimaOceanDocumentation/dev/library/public/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ClimaOcean.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../outline/">Contents</a></li><li class="is-active"><a class="tocitem" href>Public</a><ul class="internal"><li><a class="tocitem" href="#ClimaOcean"><span>ClimaOcean</span></a></li><li><a class="tocitem" href="#Diagnostics"><span>Diagnostics</span></a></li><li><a class="tocitem" href="#InitialConditions"><span>InitialConditions</span></a></li><li><a class="tocitem" href="#DataWrangling"><span>DataWrangling</span></a></li><li><a class="tocitem" href="#ECCO"><span>ECCO</span></a></li><li><a class="tocitem" href="#Bathymetry"><span>Bathymetry</span></a></li></ul></li><li><a class="tocitem" href="../internals/">Private</a></li><li><a class="tocitem" href="../function_index/">Function index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Public</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaOcean.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaOcean.jl/blob/main/docs/src/library/public.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-Documentation"><a class="docs-heading-anchor" href="#Public-Documentation">Public Documentation</a><a id="Public-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Public-Documentation" title="Permalink"></a></h1><p>Documentation for <code>ClimaOcean.jl</code>&#39;s public interface.</p><p>See the Internals section of the manual for internal package docs covering all submodules.</p><h2 id="ClimaOcean"><a class="docs-heading-anchor" href="#ClimaOcean">ClimaOcean</a><a id="ClimaOcean-1"></a><a class="docs-heading-anchor-permalink" href="#ClimaOcean" title="Permalink"></a></h2><h2 id="Diagnostics"><a class="docs-heading-anchor" href="#Diagnostics">Diagnostics</a><a id="Diagnostics-1"></a><a class="docs-heading-anchor-permalink" href="#Diagnostics" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.Diagnostics.MixedLayerDepthField-Tuple{Any, Any, Any}" href="#ClimaOcean.Diagnostics.MixedLayerDepthField-Tuple{Any, Any, Any}"><code>ClimaOcean.Diagnostics.MixedLayerDepthField</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MixedLayerDepthField(grid, tracers, buoyancy_model; Δb = 3e-4, field_kw...)</code></pre><p>Return a reduced <code>Field{Center, Center, Nothing}</code> that represents mixed layer depth for <code>model</code>, based on a buoyancy differential criterion. The mixed layer depth is defined as the depth <span>$h$</span> for which</p><p class="math-container">\[b(z=0) - b(z=-h) = Δb\]</p><p>This criterion is solved by integrating downwards and linearly interpolating to find <code>h</code>, assuming that <span>$b$</span> decreases with depth.</p><p><strong>Keyword arguments</strong></p><ul><li><code>Δb</code>: Buoyancy differential used to calculate mixed layer depth</li><li><code>field_kw</code>: Keyword arguments passed to <code>Field</code>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">h = MixedLayerDepth(model)
compute!(h) # compute mixed layer depth</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/Diagnostics.jl#L77-L104">source</a></section></article><h2 id="InitialConditions"><a class="docs-heading-anchor" href="#InitialConditions">InitialConditions</a><a id="InitialConditions-1"></a><a class="docs-heading-anchor-permalink" href="#InitialConditions" title="Permalink"></a></h2><h2 id="DataWrangling"><a class="docs-heading-anchor" href="#DataWrangling">DataWrangling</a><a id="DataWrangling-1"></a><a class="docs-heading-anchor-permalink" href="#DataWrangling" title="Permalink"></a></h2><h2 id="ECCO"><a class="docs-heading-anchor" href="#ECCO">ECCO</a><a id="ECCO-1"></a><a class="docs-heading-anchor-permalink" href="#ECCO" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.ECCO.ECCOMetadata" href="#ClimaOcean.DataWrangling.ECCO.ECCOMetadata"><code>ClimaOcean.DataWrangling.ECCO.ECCOMetadata</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ECCOMetadata{D, V}</code></pre><p>Metadata holding the ECCO dataset information:</p><ul><li><code>name</code>: The name of the dataset.</li><li><code>dates</code>: The dates of the dataset, in a <code>AbstractCFDateTime</code> format.</li><li><code>version</code>: The version of the dataset, could be ECCO2Monthly, ECCO2Daily, or ECCO4Monthly.</li><li><code>dir</code>: The directory where the dataset is stored.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/DataWrangling/ECCO/ECCO_metadata.jl#L13-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.ECCO.ECCOMetadata-Tuple{Symbol}" href="#ClimaOcean.DataWrangling.ECCO.ECCOMetadata-Tuple{Symbol}"><code>ClimaOcean.DataWrangling.ECCO.ECCOMetadata</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ECCOMetadata(name::Symbol; 
             dates = DateTimeProlepticGregorian(1993, 1, 1), 
             version = ECCO4Monthly(), 
             dir = download_ECCO_cache)</code></pre><p>Constructs an <code>ECCOMetadata</code> object with the specified parameters.</p><p><strong>Arguments</strong></p><p>============</p><ul><li><code>name::Symbol</code>: The name of the metadata.</li></ul><p><strong>Keyword Arguments</strong></p><p>===================</p><ul><li><code>date</code>: The date of the metadata (default: DateTimeProlepticGregorian(1993, 1, 1)).</li><li><code>version</code>: The version of the metadata (for the moment the choices are ECCO2Monthly(), ECCO2Daily(), or ECCO4Monthly()).</li><li><code>dir</code>: The dir to the datafile (default: download<em>ECCO</em>cache).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/DataWrangling/ECCO/ECCO_metadata.jl#L36-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.ECCO.ECCO_field-Tuple{ECCOMetadata}" href="#ClimaOcean.DataWrangling.ECCO.ECCO_field-Tuple{ECCOMetadata}"><code>ClimaOcean.DataWrangling.ECCO.ECCO_field</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ECCO_field(variable_name;
           architecture = CPU(),
           horizontal_halo = (1, 1),
           user_data = nothing,
           url = ecco_urls[variable_name],
           short_name = ecco_short_names[variable_name])</code></pre><p>Retrieve the ECCO field corresponding to <code>variable_name</code>.  The data is either: (1) retrieved from <code>filename</code>, (2) dowloaded from <code>url</code> if <code>filename</code> does not exists, (3) filled from <code>user_data</code> if <code>user_data</code> is provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/DataWrangling/ECCO/ECCO.jl#L120-L133">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.ECCO.ECCO_mask" href="#ClimaOcean.DataWrangling.ECCO.ECCO_mask"><code>ClimaOcean.DataWrangling.ECCO.ECCO_mask</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ECCO_mask(architecture = CPU(); minimum_value = Float32(-1e5))</code></pre><p>A boolean field where <code>true</code> represents a missing value in the ECCO dataset.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/DataWrangling/ECCO/ECCO_mask.jl#L3-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.DataWrangling.ECCO.ECCO_restoring_forcing" href="#ClimaOcean.DataWrangling.ECCO.ECCO_restoring_forcing"><code>ClimaOcean.DataWrangling.ECCO.ECCO_restoring_forcing</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ECCO_restoring_forcing(metadata::ECCOMetadata;
                       architecture = CPU(), 
                       backend = ECCONetCDFBackend(2),
                       time_indexing = Cyclical(),
                       mask = 1,
                       timescale = 5days)</code></pre><p>Create a restoring forcing term that restores to values stored in an ECCO field time series.</p><p><strong>Arguments:</strong></p><p>=============</p><ul><li><code>metadata</code>: The metadata for the ECCO field time series.</li></ul><p><strong>Keyword Arguments:</strong></p><p>====================</p><ul><li><code>architecture</code>: The architecture. Typically <code>CPU</code> or <code>GPU</code></li><li><code>time_indices_in_memory</code>: The number of time indices to keep in memory. trade-off between performance                           and memory footprint.    </li><li><code>time_indexing</code>: The time indexing scheme for the field time series, see <a href="@ref"><code>FieldTimeSeries</code></a></li><li><code>mask</code>: The mask value. Can be a function of <code>(x, y, z, time)</code>, an array or a number</li><li><code>timescale</code>: The restoring timescale.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/DataWrangling/ECCO/ECCO_restoring.jl#L230-L252">source</a></section></article><h2 id="Bathymetry"><a class="docs-heading-anchor" href="#Bathymetry">Bathymetry</a><a id="Bathymetry-1"></a><a class="docs-heading-anchor-permalink" href="#Bathymetry" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.Bathymetry.regrid_bathymetry-Tuple{Any}" href="#ClimaOcean.Bathymetry.regrid_bathymetry-Tuple{Any}"><code>ClimaOcean.Bathymetry.regrid_bathymetry</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">regrid_bathymetry(target_grid;
                  url = &quot;https://www.ngdc.noaa.gov/thredds/fileServer/global/ETOPO2022/60s/60s_surface_elev_netcdf&quot;, 
                  height_above_water = &lt;none&gt;,
                  minimum_depth = 0,
                  dir = download_cache,
                  filename = &quot;ETOPO_2022_v1_60s_N90W180_surface.nc&quot;)</code></pre><p>Regrid bathymetry associated with the NetCDF file at <code>path = joinpath(dir, filename)</code> to <code>target_grid</code>. If <code>path</code> does not exist, then a download is attempted from <code>joinpath(url, filename)</code>.</p><p><strong>Arguments:</strong></p><ul><li>target_grid: grid to interpolate onto</li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><p>height<em>above</em>water: limits the maximum height of above-water topography (where h &gt; 0). If                     <code>nothing</code> the original topography is retained</p></li><li><p>minimum<em>depth: minimum depth for the shallow regions, defined as a positive value.                 `h &gt; - minimum</em>depth` will be considered land</p></li><li><p>dir: directory of the bathymetry-containing file</p></li><li><p>filename: file containing bathymetric data. Must be netcdf with fields:           (1) <code>lat</code> vector of latitude nodes           (2) <code>lon</code> vector of longitude nodes           (3) <code>z</code> matrix of depth values</p></li><li><p>interpolation<em>passes: regridding/interpolation passes. The bathymetry is interpolated in                       `interpolation</em>passes - 1` intermediate steps. With more steps the                        final bathymetry will be smoother.                       Example: interpolating from a 400x200 grid to a 100x100 grid in 4 passes will involve                       - 400x200 -&gt; 325x175                       - 325x175 -&gt; 250x150                       - 250x150 -&gt; 175x125                       - 175x125 -&gt; 100x100                       If <em>coarsening</em> the original grid, linear interpolation in passes is equivalent to                        applying a smoothing filter, with more passes increasing the strength of the filter.                       If <em>refining</em> the original grid, additional passes will not help and no intermediate                       steps will be performed.</p></li><li><p>major<em>basins: Number of &quot;independent major basins&quot;, or fluid regions fully encompassed by land,               that are retained by [`remove</em>minor<em>basins!<code>](@ref). Basins are removed by order of size:               the smallest basins are removed first.</code>major</em>basins=1<code>will retain only the largest basin.               Default:</code>Inf`, which does not remove any basins.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/Bathymetry.jl#L30-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="ClimaOcean.Bathymetry.retrieve_bathymetry-Tuple{Any, Any}" href="#ClimaOcean.Bathymetry.retrieve_bathymetry-Tuple{Any, Any}"><code>ClimaOcean.Bathymetry.retrieve_bathymetry</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">retrieve_bathymetry(grid, filename; kw...)</code></pre><p>Retrieve the bathymetry data from a file or generate it using a grid and save it to a file.</p><p><strong>Arguments</strong></p><p>============</p><ul><li><code>grid</code>: The grid used to generate the bathymetry data.</li><li><code>filename</code>: The name of the file to read or save the bathymetry data.</li><li><code>kw...</code>: Additional keyword arguments.</li></ul><p><strong>Returns</strong></p><p>===========</p><ul><li><code>bottom_height</code>: The retrieved or generated bathymetry data.</li></ul><p>If the specified file exists, the function reads the bathymetry data from the file.  Otherwise, it generates the bathymetry data using the provided grid and saves it to the file before returning it.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaOcean.jl/blob/69a111ae12065e332405b63c75d7bc74680ccb02/src/Bathymetry.jl#L334-L352">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../outline/">« Contents</a><a class="docs-footer-nextpage" href="../internals/">Private »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Sunday 27 October 2024 02:14">Sunday 27 October 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
