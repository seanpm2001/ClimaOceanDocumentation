var documenterSearchIndex = {"docs":
[{"location":"library/function_index/#main-index","page":"Function index","title":"Index","text":"","category":"section"},{"location":"library/function_index/","page":"Function index","title":"Function index","text":"Pages = [\"public.md\", \"internals.md\", \"function_index.md\"]","category":"page"},{"location":"library/outline/#Library-Outline","page":"Contents","title":"Library Outline","text":"","category":"section"},{"location":"library/outline/","page":"Contents","title":"Contents","text":"Pages = [\"public.md\", \"internals.md\", \"function_index.md\"]","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"EditURL = \"../../../examples/inspect_ecco2_data.jl\"","category":"page"},{"location":"literated/inspect_ecco2_data/#A-quick-look-at-ECCO2-data","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"","category":"section"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"ClimaOcean can download and utilize data from the \"ECCO2\" state estimate, which stands for \"Estimating the Circulation and Climate of the Ocean\" –- two!","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"This script shows how to download three-dimensional temperature and salinity fields from ECCO2, and makes a short animation to showcase the fields' content.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"For this example we need Oceananigans for Field utilities, CairoMakie for plotting Printf for nice labeling, and of course ClimaOcean to actually download and construct the ECCO2 fields.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"using Oceananigans\nusing CairoMakie\nusing Printf\n\nusing ClimaOcean: ECCO2","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"The function ecco2_field provided by ClimaOcean.DataWrangling.ECCO2 will automatically download ECCO2 data if it doesn't already exist at the default location.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"T = ECCO2.ecco2_field(:temperature)\nS = ECCO2.ecco2_field(:salinity)","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"Next, we massage the ECCO2 data by inserting NaNs in \"land cells\", which are diagnosed by having an unphysically low temperature.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"Tp = parent(T)\nSp = parent(S)\nSp[Tp .< -10] .= NaN\nTp[Tp .< -10] .= NaN","category":"page"},{"location":"literated/inspect_ecco2_data/#Plotting-ECCO2-data","page":"A quick look at ECCO2 data","title":"Plotting ECCO2 data","text":"","category":"section"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"We're ready to plot. We'll make an animation that depicts how the ECCO2 data changes with depth.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"fig = Figure(resolution=(1200, 1400))\n\naxT = Axis(fig[1, 1])\naxS = Axis(fig[2, 1])\n\nλ, φ, z = nodes(T)","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"To make an animation that scrolls through the 3D temperature and salinity fields, we make an Observable for the vertical index, and then construct slices of T, S using the Observable, k.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"grid = T.grid\nNz = size(grid, 3)\nk = Observable(Nz)\n\nTk = @lift interior(T, :, :, $k)\nSk = @lift interior(S, :, :, $k)","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"Finally, we make a nice plot with a label that displays depth, colorbars, and light gray within land cells.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"hmT = heatmap!(axT, λ, φ, Tk, nan_color=:lightgray, colorrange=(-2, 30), colormap=:thermal)\nhmS = heatmap!(axS, λ, φ, Sk, nan_color=:lightgray, colorrange=(31, 37), colormap=:haline)\n\nColorbar(fig[1, 2], hmT, label=\"Temperature (ᵒC)\")\nColorbar(fig[2, 2], hmS, label=\"Salinity (psu)\")\n\nz = znodes(grid, Center())\ndepth_str = @lift @sprintf(\"%.1f meters depth\", -z[$k])\ntext!(axT, 50, 50, text=depth_str, justification=:center, fontsize=24)\ntext!(axS, 50, 50, text=depth_str, justification=:center, fontsize=24)","category":"page"},{"location":"literated/inspect_ecco2_data/#Making-the-animation","page":"A quick look at ECCO2 data","title":"Making the animation","text":"","category":"section"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"This animation is a little fancy. We start by displaying the surface field, then we scroll through depth to the bottom and pause there. Next, we scroll back to the surface and pause.","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"stillframes = 10\nmovingframes = Nz\n\nrecord(fig, \"ECCO2_temperature_salinity.gif\", framerate=4) do io\n\n    [recordframe!(io) for _ = 1:stillframes]\n\n    for kk in Nz:-4:1\n        k[] = kk\n        recordframe!(io)\n    end\n\n    [recordframe!(io) for _ = 1:stillframes]\n\n    for kk in 1:4:Nz\n        k[] = kk\n        recordframe!(io)\n    end\n\n    [recordframe!(io) for _ = 1:stillframes]\nend","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"","category":"page"},{"location":"literated/inspect_ecco2_data/","page":"A quick look at ECCO2 data","title":"A quick look at ECCO2 data","text":"This page was generated using Literate.jl.","category":"page"},{"location":"library/internals/#Private-types-and-functions","page":"Private","title":"Private types and functions","text":"","category":"section"},{"location":"library/internals/","page":"Private","title":"Private","text":"Documentation for ClimaOcean.jl's internal interface.","category":"page"},{"location":"library/internals/#ClimaOcean","page":"Private","title":"ClimaOcean","text":"","category":"section"},{"location":"library/internals/","page":"Private","title":"Private","text":"Modules = [ClimaOcean]\nPublic = false","category":"page"},{"location":"library/internals/#Diagnostics","page":"Private","title":"Diagnostics","text":"","category":"section"},{"location":"library/internals/","page":"Private","title":"Private","text":"Modules = [ClimaOcean.Diagnostics]\nPublic = false","category":"page"},{"location":"#ClimaOcean.jl","page":"Home","title":"ClimaOcean.jl","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Ocean component of CliMa's Earth system model.","category":"page"},{"location":"library/public/#Public-Documentation","page":"Public","title":"Public Documentation","text":"","category":"section"},{"location":"library/public/","page":"Public","title":"Public","text":"Documentation for ClimaOcean.jl's public interface.","category":"page"},{"location":"library/public/","page":"Public","title":"Public","text":"See the Internals section of the manual for internal package docs covering all submodules.","category":"page"},{"location":"library/public/#ClimaOcean","page":"Public","title":"ClimaOcean","text":"","category":"section"},{"location":"library/public/","page":"Public","title":"Public","text":"Modules = [ClimaOcean]\nPrivate = false","category":"page"},{"location":"library/public/#Diagnostics","page":"Public","title":"Diagnostics","text":"","category":"section"},{"location":"library/public/","page":"Public","title":"Public","text":"Modules = [ClimaOcean.Diagnostics]\nPrivate = false","category":"page"},{"location":"library/public/#ClimaOcean.Diagnostics.MixedLayerDepthField-Tuple{Any, Any, Any}","page":"Public","title":"ClimaOcean.Diagnostics.MixedLayerDepthField","text":"MixedLayerDepthField(grid, tracers, buoyancy_model; Δb = 3e-4, field_kw...)\n\nReturn a reduced Field{Center, Center, Nothing} that represents mixed layer depth for model, based on a buoyancy differential criterion. The mixed layer depth is defined as the depth h for which\n\nb(z=0) - b(z=-h) = Δb\n\nThis criterion is solved by integrating downwards and linearly interpolating to find h, assuming that b decreases with depth.\n\nKeyword arguments\n\nΔb: Buoyancy differential used to calculate mixed layer depth\nfield_kw: Keyword arguments passed to Field.\n\nExample\n\nh = MixedLayerDepth(model)\ncompute!(h) # compute mixed layer depth\n\n\n\n\n\n","category":"method"}]
}
