<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>A quick look at ECCO2 data · ClimaOcean.jl</title><meta name="title" content="A quick look at ECCO2 data · ClimaOcean.jl"/><meta property="og:title" content="A quick look at ECCO2 data · ClimaOcean.jl"/><meta property="twitter:title" content="A quick look at ECCO2 data · ClimaOcean.jl"/><meta name="description" content="Documentation for ClimaOcean.jl."/><meta property="og:description" content="Documentation for ClimaOcean.jl."/><meta property="twitter:description" content="Documentation for ClimaOcean.jl."/><meta property="og:url" content="https://clima.github.io/ClimaOceanDocumentation/dev/literated/inspect_ecco2_data/"/><meta property="twitter:url" content="https://clima.github.io/ClimaOceanDocumentation/dev/literated/inspect_ecco2_data/"/><link rel="canonical" href="https://clima.github.io/ClimaOceanDocumentation/dev/literated/inspect_ecco2_data/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ClimaOcean.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../library/outline/">Contents</a></li><li><a class="tocitem" href="../../library/public/">Public</a></li><li><a class="tocitem" href="../../library/internals/">Private</a></li><li><a class="tocitem" href="../../library/function_index/">Function index</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>A quick look at ECCO2 data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>A quick look at ECCO2 data</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaOcean.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaOcean.jl/blob/main/examples/inspect_ecco2_data.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="A-quick-look-at-ECCO2-data"><a class="docs-heading-anchor" href="#A-quick-look-at-ECCO2-data">A quick look at ECCO2 data</a><a id="A-quick-look-at-ECCO2-data-1"></a><a class="docs-heading-anchor-permalink" href="#A-quick-look-at-ECCO2-data" title="Permalink"></a></h1><p>ClimaOcean can download and utilize data from the &quot;ECCO2&quot; state estimate, which stands for &quot;Estimating the Circulation and Climate of the Ocean&quot; –- two!</p><p>This script shows how to download three-dimensional temperature and salinity fields from ECCO2, and makes a short animation to showcase the fields&#39; content.</p><p>For this example we need Oceananigans for Field utilities, CairoMakie for plotting Printf for nice labeling, and of course ClimaOcean to actually download and construct the ECCO2 fields.</p><pre><code class="language-julia hljs">using Oceananigans
using CairoMakie
using Printf

using ClimaOcean: ECCO2</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr91"><span class="sgr1">ERROR: </span></span>LoadError: UndefVarError: `IntervalBox` not defined
Stacktrace:
 [1] top-level scope
<span class="sgr90">   @</span> <span class="sgr90">~/.julia/packages/TaylorSeries/2qRvJ/ext/<span class="sgr4">TaylorSeriesIAExt.jl:182</span></span>
 [2] <span class="sgr1">include</span>
<span class="sgr90">   @</span> <span class="sgr90">./<span class="sgr4">Base.jl:495</span> [inlined]</span>
 [3] <span class="sgr1">include_package_for_output(</span><span class="sgr90">pkg</span>::Base.PkgId, <span class="sgr90">input</span>::String, <span class="sgr90">depot_path</span>::Vector<span class="sgr90">{String}</span>, <span class="sgr90">dl_load_path</span>::Vector<span class="sgr90">{String}</span>, <span class="sgr90">load_path</span>::Vector<span class="sgr90">{String}</span>, <span class="sgr90">concrete_deps</span>::Vector<span class="sgr90">{Pair{Base.PkgId, UInt128}}</span>, <span class="sgr90">source</span>::String<span class="sgr1">)</span>
<span class="sgr90">   @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:2222</span></span>
 [4] top-level scope
<span class="sgr90">   @</span> <span class="sgr90"><span class="sgr4">stdin:3</span></span>
in expression starting at /home/runner/.julia/packages/TaylorSeries/2qRvJ/ext/TaylorSeriesIAExt.jl:1
in expression starting at stdin:3
<span class="sgr91"><span class="sgr1">┌ Error: </span></span>Error during loading of extension TaylorSeriesIAExt of TaylorSeries, use `Base.retry_load_extensions()` to retry.
<span class="sgr91"><span class="sgr1">│ </span></span>  exception =
<span class="sgr91"><span class="sgr1">│ </span></span>   1-element ExceptionStack:
<span class="sgr91"><span class="sgr1">│ </span></span>   Failed to precompile TaylorSeriesIAExt [ed7ef945-33a4-511e-97fe-2b89c7a130ca] to &quot;/home/runner/.julia/compiled/v1.10/TaylorSeriesIAExt/jl_RPXSVv&quot;.
<span class="sgr91"><span class="sgr1">│ </span></span>   Stacktrace:
<span class="sgr91"><span class="sgr1">│ </span></span>     [1] <span class="sgr1">error(</span><span class="sgr90">s</span>::String<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">error.jl:35</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [2] <span class="sgr1">compilecache(</span><span class="sgr90">pkg</span>::Base.PkgId, <span class="sgr90">path</span>::String, <span class="sgr90">internal_stderr</span>::IO, <span class="sgr90">internal_stdout</span>::IO, <span class="sgr90">keep_loaded_modules</span>::Bool<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:2468</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [3] <span class="sgr1">compilecache</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">loading.jl:2340</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [4] <span class="sgr1">(::Base.var&quot;#968#969&quot;{Base.PkgId})()</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1974</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [5] <span class="sgr1">mkpidlock(</span><span class="sgr90">f</span>::Base.var&quot;#968#969&quot;<span class="sgr90">{Base.PkgId}</span>, <span class="sgr90">at</span>::String, <span class="sgr90">pid</span>::Int32; <span class="sgr90">kwopts</span>::@Kwargs<span class="sgr90">{stale_age::Int64, wait::Bool}</span><span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr35">FileWatching.Pidfile</span> <span class="sgr90">/opt/hostedtoolcache/julia/1.10.2/x64/share/julia/stdlib/v1.10/FileWatching/src/<span class="sgr4">pidfile.jl:93</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [6] <span class="sgr1">#mkpidlock#6</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">/opt/hostedtoolcache/julia/1.10.2/x64/share/julia/stdlib/v1.10/FileWatching/src/<span class="sgr4">pidfile.jl:88</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [7] <span class="sgr1">trymkpidlock(</span>::Function, ::Vararg<span class="sgr90">{Any}</span>; <span class="sgr90">kwargs</span>::@Kwargs<span class="sgr90">{stale_age::Int64}</span><span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr35">FileWatching.Pidfile</span> <span class="sgr90">/opt/hostedtoolcache/julia/1.10.2/x64/share/julia/stdlib/v1.10/FileWatching/src/<span class="sgr4">pidfile.jl:111</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [8] <span class="sgr1">#invokelatest#2</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:894</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>     [9] <span class="sgr1">invokelatest</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:889</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [10] <span class="sgr1">maybe_cachefile_lock(</span><span class="sgr90">f</span>::Base.var&quot;#968#969&quot;<span class="sgr90">{Base.PkgId}</span>, <span class="sgr90">pkg</span>::Base.PkgId, <span class="sgr90">srcpath</span>::String; <span class="sgr90">stale_age</span>::Int64<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:2983</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [11] <span class="sgr1">maybe_cachefile_lock</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">loading.jl:2980</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [12] <span class="sgr1">_require(</span><span class="sgr90">pkg</span>::Base.PkgId, <span class="sgr90">env</span>::Nothing<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1970</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [13] <span class="sgr1">__require_prelocked(</span><span class="sgr90">uuidkey</span>::Base.PkgId, <span class="sgr90">env</span>::Nothing<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1812</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [14] <span class="sgr1">#invoke_in_world#3</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:926</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [15] <span class="sgr1">invoke_in_world</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:923</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [16] <span class="sgr1">_require_prelocked</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">loading.jl:1803</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [17] <span class="sgr1">_require_prelocked</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">loading.jl:1802</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [18] <span class="sgr1">run_extension_callbacks(</span><span class="sgr90">extid</span>::Base.ExtensionId<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1295</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [19] <span class="sgr1">run_extension_callbacks(</span><span class="sgr90">pkgid</span>::Base.PkgId<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1330</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [20] <span class="sgr1">run_package_callbacks(</span><span class="sgr90">modkey</span>::Base.PkgId<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1164</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [21] <span class="sgr1">_tryrequire_from_serialized(</span><span class="sgr90">modkey</span>::Base.PkgId, <span class="sgr90">path</span>::String, <span class="sgr90">ocachepath</span>::String, <span class="sgr90">sourcepath</span>::String, <span class="sgr90">depmods</span>::Vector<span class="sgr90">{Any}</span><span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1487</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [22] <span class="sgr1">_require_search_from_serialized(</span><span class="sgr90">pkg</span>::Base.PkgId, <span class="sgr90">sourcepath</span>::String, <span class="sgr90">build_id</span>::UInt128<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1574</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [23] <span class="sgr1">_require(</span><span class="sgr90">pkg</span>::Base.PkgId, <span class="sgr90">env</span>::String<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1938</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [24] <span class="sgr1">__require_prelocked(</span><span class="sgr90">uuidkey</span>::Base.PkgId, <span class="sgr90">env</span>::String<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1812</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [25] <span class="sgr1">#invoke_in_world#3</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:926</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [26] <span class="sgr1">invoke_in_world</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:923</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [27] <span class="sgr1">_require_prelocked(</span><span class="sgr90">uuidkey</span>::Base.PkgId, <span class="sgr90">env</span>::String<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1803</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [28] <span class="sgr1">macro expansion</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">loading.jl:1790</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [29] <span class="sgr1">macro expansion</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">lock.jl:267</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [30] <span class="sgr1">__require(</span><span class="sgr90">into</span>::Module, <span class="sgr90">mod</span>::Symbol<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1753</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [31] <span class="sgr1">#invoke_in_world#3</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:926</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [32] <span class="sgr1">invoke_in_world</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">essentials.jl:923</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [33] <span class="sgr1">require(</span><span class="sgr90">into</span>::Module, <span class="sgr90">mod</span>::Symbol<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">loading.jl:1746</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [34] <span class="sgr1">eval</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">boot.jl:385</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [35] <span class="sgr1">#58</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">expander_pipeline.jl:754</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [36] <span class="sgr1">cd(</span><span class="sgr90">f</span>::Documenter.var&quot;#58#60&quot;<span class="sgr90">{Module, Expr}</span>, <span class="sgr90">dir</span>::String<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base.Filesystem</span> <span class="sgr90">./<span class="sgr4">file.jl:112</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [37] <span class="sgr1">(::Documenter.var&quot;#57#59&quot;{Documenter.Page, Module, Expr})()</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr36">Documenter</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">expander_pipeline.jl:753</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [38] <span class="sgr1">(::IOCapture.var&quot;#4#7&quot;{DataType, Documenter.var&quot;#57#59&quot;{Documenter.Page, Module, Expr}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}, IOContext{Base.PipeEndpoint}})()</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr32">IOCapture</span> <span class="sgr90">~/.julia/packages/IOCapture/Rzdxd/src/<span class="sgr4">IOCapture.jl:161</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [39] <span class="sgr1">with_logstate(</span><span class="sgr90">f</span>::Function, <span class="sgr90">logstate</span>::Any<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base.CoreLogging</span> <span class="sgr90">./<span class="sgr4">logging.jl:515</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [40] <span class="sgr1">with_logger</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">./<span class="sgr4">logging.jl:627</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [41] <span class="sgr1">capture(</span><span class="sgr90">f</span>::Documenter.var&quot;#57#59&quot;<span class="sgr90">{Documenter.Page, Module, Expr}</span>; <span class="sgr90">rethrow</span>::Type, <span class="sgr90">color</span>::Bool, <span class="sgr90">passthrough</span>::Bool, <span class="sgr90">capture_buffer</span>::IOBuffer<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr32">IOCapture</span> <span class="sgr90">~/.julia/packages/IOCapture/Rzdxd/src/<span class="sgr4">IOCapture.jl:158</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [42] <span class="sgr1">runner(</span>::Type<span class="sgr90">{Documenter.Expanders.ExampleBlocks}</span>, <span class="sgr90">node</span>::MarkdownAST.Node<span class="sgr90">{Nothing}</span>, <span class="sgr90">page</span>::Documenter.Page, <span class="sgr90">doc</span>::Documenter.Document<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr36">Documenter</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">expander_pipeline.jl:752</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [43] <span class="sgr1">dispatch(</span>::Type<span class="sgr90">{Documenter.Expanders.ExpanderPipeline}</span>, ::MarkdownAST.Node<span class="sgr90">{Nothing}</span>, ::Vararg<span class="sgr90">{Any}</span><span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr36">Documenter.Selectors</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/utilities/<span class="sgr4">Selectors.jl:170</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [44] <span class="sgr1">expand(</span><span class="sgr90">doc</span>::Documenter.Document<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr36">Documenter</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">expander_pipeline.jl:22</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [45] <span class="sgr1">runner(</span>::Type<span class="sgr90">{Documenter.Builder.ExpandTemplates}</span>, <span class="sgr90">doc</span>::Documenter.Document<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr36">Documenter</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">builder_pipeline.jl:222</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [46] <span class="sgr1">dispatch(</span>::Type<span class="sgr90">{Documenter.Builder.DocumentPipeline}</span>, <span class="sgr90">x</span>::Documenter.Document<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr36">Documenter.Selectors</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/utilities/<span class="sgr4">Selectors.jl:170</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [47] <span class="sgr1">#83</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">makedocs.jl:248</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [48] <span class="sgr1">withenv(</span>::Documenter.var&quot;#83#85&quot;<span class="sgr90">{Documenter.Document}</span>, ::Pair<span class="sgr90">{String, Nothing}</span>, ::Vararg<span class="sgr90">{Pair{String, Nothing}}</span><span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">env.jl:257</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [49] <span class="sgr1">#82</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">makedocs.jl:247</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [50] <span class="sgr1">cd(</span><span class="sgr90">f</span>::Documenter.var&quot;#82#84&quot;<span class="sgr90">{Documenter.Document}</span>, <span class="sgr90">dir</span>::String<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base.Filesystem</span> <span class="sgr90">./<span class="sgr4">file.jl:112</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [51] <span class="sgr1">#makedocs#81</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">~/.julia/packages/Documenter/1HwWe/src/<span class="sgr4">makedocs.jl:247</span> [inlined]</span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [52] top-level scope
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">~/work/ClimaOcean.jl/ClimaOcean.jl/docs/<span class="sgr4">make.jl:47</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [53] <span class="sgr1">include(</span><span class="sgr90">mod</span>::Module, <span class="sgr90">_path</span>::String<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">Base.jl:495</span></span>
<span class="sgr91"><span class="sgr1">│ </span></span>    [54] <span class="sgr1">exec_options(</span><span class="sgr90">opts</span>::Base.JLOptions<span class="sgr1">)</span>
<span class="sgr91"><span class="sgr1">│ </span></span>   <span class="sgr90">    @</span> <span class="sgr90">Base</span> <span class="sgr90">./<span class="sgr4">client.jl:318</span></span>
<span class="sgr91"><span class="sgr1">└ </span></span><span class="sgr90">@ Base loading.jl:1301</span></code></pre><p>The function <code>ecco2_field</code> provided by <code>ClimaOcean.DataWrangling.ECCO2</code> will automatically download ECCO2 data if it doesn&#39;t already exist at the default location.</p><pre><code class="language-julia hljs">T = ECCO2.ecco2_field(:temperature)
S = ECCO2.ecco2_field(:salinity)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1440×720×50 Field{Oceananigans.Grids.Center, Oceananigans.Grids.Center, Oceananigans.Grids.Center} on Oceananigans.Grids.LatitudeLongitudeGrid on Oceananigans.Architectures.CPU
├── grid: 1440×720×50 LatitudeLongitudeGrid{Float64, Oceananigans.Grids.Periodic, Oceananigans.Grids.Bounded, Oceananigans.Grids.Bounded} on Oceananigans.Architectures.CPU with 1×1×1 halo and with precomputed metrics
├── boundary conditions: FieldBoundaryConditions
│   └── west: Periodic, east: Periodic, south: ZeroFlux, north: ZeroFlux, bottom: ZeroFlux, top: ZeroFlux, immersed: ZeroFlux
└── data: 1442×722×52 OffsetArray(::Array{Float64, 3}, 0:1441, 0:721, 0:51) with eltype Float64 with indices 0:1441×0:721×0:51
    └── max=41.2821, min=-1.0e23, mean=-4.86305e22</code></pre><p>Next, we massage the ECCO2 data by inserting NaNs in &quot;land cells&quot;, which are diagnosed by having an unphysically low temperature.</p><pre><code class="language-julia hljs">Tp = parent(T)
Sp = parent(S)
Sp[Tp .&lt; -10] .= NaN
Tp[Tp .&lt; -10] .= NaN</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">26717633-element view(::Vector{Float64}, [1443, 1444, 1445, 1446, 1447, 1448, 1449, 1450, 1451, 1452  …  54100829, 54100830, 54100831, 54100832, 54100833, 54100834, 54100835, 54100836, 54100837, 54100838]) with eltype Float64:
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
   ⋮
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN
 NaN</code></pre><h1 id="Plotting-ECCO2-data"><a class="docs-heading-anchor" href="#Plotting-ECCO2-data">Plotting ECCO2 data</a><a id="Plotting-ECCO2-data-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-ECCO2-data" title="Permalink"></a></h1><p>We&#39;re ready to plot. We&#39;ll make an animation that depicts how the ECCO2 data changes with depth.</p><pre><code class="language-julia hljs">fig = Figure(resolution=(1200, 1400))

axT = Axis(fig[1, 1])
axS = Axis(fig[2, 1])

λ, φ, z = nodes(T)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">([0.125, 0.375, 0.625, 0.875, 1.125, 1.375, 1.625, 1.875, 2.125, 2.375  …  357.625, 357.875, 358.125, 358.375, 358.625, 358.875, 359.125, 359.375, 359.625, 359.875], [-89.875, -89.625, -89.375, -89.125, -88.875, -88.625, -88.375, -88.125, -87.875, -87.625  …  87.625, 87.875, 88.125, 88.375, 88.625, 88.875, 89.125, 89.375, 89.625, 89.875], [-5906.25, -5467.0, -5045.0, -4646.0, -4270.0, -3917.0, -3587.0, -3280.0, -2996.0, -2735.0  …  -95.1312484741211, -85.0374984741211, -75.00875091552734, -65.00125122070312, -55.0, -45.0, -35.0, -25.0, -15.0, -5.0])</code></pre><p>To make an animation that scrolls through the 3D temperature and salinity fields, we make an Observable for the vertical index, and then construct slices of T, S using the Observable, <code>k</code>.</p><pre><code class="language-julia hljs">grid = T.grid
Nz = size(grid, 3)
k = Observable(Nz)

Tk = @lift interior(T, :, :, $k)
Sk = @lift interior(S, :, :, $k)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Observable([NaN NaN … 31.11573600769043 31.07086753845215; NaN NaN … 31.11575698852539 31.070938110351562; … ; NaN NaN … 31.118865966796875 31.07072639465332; NaN NaN … 31.11888885498047 31.070796966552734])
</code></pre><p>Finally, we make a nice plot with a label that displays depth, colorbars, and light gray within land cells.</p><pre><code class="language-julia hljs">hmT = heatmap!(axT, λ, φ, Tk, nan_color=:lightgray, colorrange=(-2, 30), colormap=:thermal)
hmS = heatmap!(axS, λ, φ, Sk, nan_color=:lightgray, colorrange=(31, 37), colormap=:haline)

Colorbar(fig[1, 2], hmT, label=&quot;Temperature (ᵒC)&quot;)
Colorbar(fig[2, 2], hmS, label=&quot;Salinity (psu)&quot;)

z = znodes(grid, Center())
depth_str = @lift @sprintf(&quot;%.1f meters depth&quot;, -z[$k])
text!(axT, 50, 50, text=depth_str, justification=:center, fontsize=24)
text!(axS, 50, 50, text=depth_str, justification=:center, fontsize=24)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">MakieCore.Text{Tuple{Vector{GeometryBasics.Point{2, Float32}}}}</code></pre><h1 id="Making-the-animation"><a class="docs-heading-anchor" href="#Making-the-animation">Making the animation</a><a id="Making-the-animation-1"></a><a class="docs-heading-anchor-permalink" href="#Making-the-animation" title="Permalink"></a></h1><p>This animation is a little fancy. We start by displaying the surface field, then we scroll through depth to the bottom and pause there. Next, we scroll back to the surface and pause.</p><pre><code class="language-julia hljs">stillframes = 10
movingframes = Nz

record(fig, &quot;ECCO2_temperature_salinity.gif&quot;, framerate=4) do io

    [recordframe!(io) for _ = 1:stillframes]

    for kk in Nz:-4:1
        k[] = kk
        recordframe!(io)
    end

    [recordframe!(io) for _ = 1:stillframes]

    for kk in 1:4:Nz
        k[] = kk
        recordframe!(io)
    end

    [recordframe!(io) for _ = 1:stillframes]
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">&quot;ECCO2_temperature_salinity.gif&quot;</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Monday 25 March 2024 08:26">Monday 25 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
